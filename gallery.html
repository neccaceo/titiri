<div style="max-width: 80rem; margin: 0 auto; background: white; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); overflow: hidden;">
    <h1 style="font-size: 1.875rem; font-weight: bold; color: #1f2937; margin-bottom: 0.5rem; padding: 1.5rem 1.5rem 0 1.5rem;">ğŸ–¼ï¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬</h1>

    <div id="error" style="display: none; padding: 1.5rem;"></div>

    <div id="swiper-container" style="margin-top: 2.5rem;">
        <div class="swiper mySwiper">
            <div class="swiper-wrapper" id="image-container">
            </div>

            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-pagination"></div>
        </div>
    </div>
</div>

<div id="fullScreenModal" class="full-screen-modal">
    <button id="closeModalBtn" class="modal-close-button">&times;</button>
    <img id="fullScreenImage" src="" alt="í™•ëŒ€ ì´ë¯¸ì§€">
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
    .modal-close-button {
        position: absolute;
        top: 20px;
        right: 20px;
        background: none;
        border: none;
        color: white;
        font-size: 2.5rem;
        cursor: pointer;
        z-index: 1001;
    }
</style>

<script>
    const imageContainer = document.getElementById('image-container');
    const errorDiv = document.getElementById('error');
    const swiperContainer = document.getElementById('swiper-container');
    const fullScreenModal = document.getElementById('fullScreenModal');
    const fullScreenImage = document.getElementById('fullScreenImage');
    const closeModalBtn = document.getElementById('closeModalBtn');

    let swiper = null;

    async function loadImages() {
        try {
            errorDiv.style.display = 'none';

            // JSON íŒŒì¼ ëŒ€ì‹  ì§ì ‘ ë°ì´í„° í¬í•¨
            const images = [
                {
                    "name": "ì´ë¯¸ì§€ 1",
                    "url": "https://i.imgur.com/a3vpRs9.png",
                    "source": "Imgur",
                    "date": "2025-11-10"
                }
            ];

            if (!Array.isArray(images) || images.length === 0) {
                throw new Error('ì´ë¯¸ì§€ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
            }

            renderImages(images);

            if (swiper) {
                swiper.destroy();
            }
            initSwiper();

        } catch (error) {
            errorDiv.style.display = 'block';
            errorDiv.innerHTML = `<div style="background-color: #fee2e2; color: #991b1b; padding: 1rem; border-radius: 0.5rem; margin: 1.25rem 0;">
                <strong>ì˜¤ë¥˜:</strong> ${error.message}<br>
                <small>ë¸Œë¼ìš°ì € ì½˜ì†”(F12)ì—ì„œ ë” ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</small>
            </div>`;
            console.error('ì´ë¯¸ì§€ ë¡œë“œ ì˜¤ë¥˜:', error);
        }
    }

    function isNewImage(dateString) {
        if (!dateString) return false;
        const imageDate = new Date(dateString);
        const now = new Date();
        const oneMonthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
        return imageDate >= oneMonthAgo;
    }

    function renderImages(images) {
        imageContainer.innerHTML = '';

        images.forEach((image, index) => {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';

            const isNew = isNewImage(image.date);
            const newBadge = isNew ? '<span style="position: absolute; top: 10px; right: 10px; background-color: #ef4444; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: bold; z-index: 10;">NEW</span>' : '';

            slide.innerHTML = `
                <div style="position: relative; background: white; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); overflow: hidden;">
                    ${newBadge}
                    <img src="${image.url}" alt="${image.name || `ì´ë¯¸ì§€ ${index + 1}`}" onerror="this.alt='ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨'; this.style.backgroundColor='#f3f4f6';" style="width: 100%; height: 350px; object-fit: cover; display: block;">
                    <div style="padding: 1rem;">
                        <p style="font-size: 0.875rem; color: #1f2937; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="${image.name || `ì´ë¯¸ì§€ ${index + 1}`}">
                            <strong>ì´ë¦„:</strong> ${image.name || `ì´ë¯¸ì§€ ${index + 1}`}
                        </p>
                        <p style="font-size: 0.875rem; color: #4b5563; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="${image.source || 'ë¯¸ì§€ì •'}">
                            <strong>ì¶œì²˜:</strong> ${image.source || 'ë¯¸ì§€ì •'}
                        </p>
                    </div>
                </div>
            `;

            imageContainer.appendChild(slide);
        });
    }

    function initSwiper() {
        swiper = new Swiper(".mySwiper", {
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: "auto",
            spaceBetween: 40,
            loop: true,
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });

        swiper.on('click', function(swiper, event) {
            const clickedSlide = event.target.closest('.swiper-slide');
            if (!clickedSlide) return;

            const clickedIndex = swiper.slides.indexOf(clickedSlide);

            if (clickedSlide.classList.contains('swiper-slide-active')) {
                const imageElement = clickedSlide.querySelector('img');
                if (imageElement && imageElement.src) {
                    fullScreenImage.src = imageElement.src;
                    fullScreenModal.classList.add('active');
                }
            } else {
                swiper.slideTo(clickedIndex);
            }
        });
    }

    closeModalBtn.addEventListener('click', () => {
        fullScreenModal.classList.remove('active');
        fullScreenImage.src = '';
    });

    fullScreenModal.addEventListener('click', (event) => {
        if (event.target === fullScreenModal) {
            fullScreenModal.classList.remove('active');
            fullScreenImage.src = '';
        }
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
    loadImages();
</script>
